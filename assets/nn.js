(()=>{var t,s={382:()=>{},1054:()=>{},1094:(t,s,i)=>{"use strict";i.d(s,{A:()=>a});var e=i(1026),n=i.n(e),h=i(278),o=i.n(h)()(n());o.push([t.id,'html,\nbody {\n  padding: 0;\n  margin: 0;\n  width: 100%;\n  height: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n}\nh1 {\n  font-size: 18px;\n  font-weight: bold;\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n/* Offline page */\n.page {\n  margin-top: 20px;\n  overflow: hidden;\n}\n.page .game {\n  position: relative;\n  color: #2b2b2b;\n  font-size: 1em;\n  margin: 0 auto;\n  max-width: 600px;\n  width: 100%;\n  padding-top: 50px;\n}\n.page .game-canvas {\n  height: 150px;\n  max-width: 600px;\n  opacity: 1;\n  overflow: hidden;\n  top: 0;\n  z-index: 2;\n}\n.page .generation {\n  position: absolute;\n  top: 4px;\n  left: 0;\n  right: 0;\n  font-weight: bold;\n  text-align: center;\n}\n@media (max-height: 350px) {\n  .game {\n    margin-top: 5%;\n  }\n}\n@media (min-width: 600px) and (max-width: 736px) and (orientation: landscape) {\n  .page .game {\n    margin-left: 0;\n    margin-right: 0;\n  }\n}\n@media (max-width: 240px) {\n  .game {\n    overflow: inherit;\n    padding: 0 8px;\n  }\n}\n',""]);const a=o},1715:()=>{},2883:(t,s,i)=>{"use strict";i(3665);var e=i(5292),n=i.n(e),h=i(9893),o=i.n(h),a=i(9383),r=i.n(a),c=i(6884),d=i.n(c),l=i(9088),u=i.n(l),p=i(7997),m=i.n(p),g=i(1094),f={};f.styleTagTransform=m(),f.setAttributes=d(),f.insert=r().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=u(),n()(g.A,f),g.A&&g.A.locals&&g.A.locals;let I=null;function E(){return I}function x(){return performance.now()}function C(t,s){return Math.floor(Math.random()*(s-t+1))+t}class T{static dimensions={WIDTH:10,HEIGHT:13,DEST_WIDTH:11};static yPos=[0,13,27,40,53,67,80,93,107,120];static config={MAX_DISTANCE_UNITS:5,ACHIEVEMENT_DISTANCE:100,COEFFICIENT:.025,FLASH_DURATION:250,FLASH_ITERATIONS:3};constructor(t,s,i){this.canvas=t,this.canvasCtx=t.getContext("2d"),this.image=E(),this.spritePos=s,this.x=0,this.y=5,this.currentDistance=0,this.maxScore=0,this.highScore=0,this.container=null,this.digits=[],this.acheivement=!1,this.defaultString="",this.flashTimer=0,this.flashIterations=0,this.invertTrigger=!1,this.config=T.config,this.maxScoreUnits=this.config.MAX_DISTANCE_UNITS,this.init(i)}init(t){let s="";this.calcXPos(t),this.maxScore=this.maxScoreUnits;for(let t=0;t<this.maxScoreUnits;t+=1)this.draw(t,0),this.defaultString+="0",s+="9";this.maxScore=parseInt(s,0)}calcXPos(t){this.x=t-T.dimensions.DEST_WIDTH*(this.maxScoreUnits+1)}draw(t,s,i){const e=T.dimensions.WIDTH,n=T.dimensions.HEIGHT;let h=T.dimensions.WIDTH*s,o=0;const a=t*T.dimensions.DEST_WIDTH,r=this.y,c=T.dimensions.WIDTH,d=T.dimensions.HEIGHT;if(h+=this.spritePos.x,o+=this.spritePos.y,this.canvasCtx.save(),i){const t=this.x-2*this.maxScoreUnits*T.dimensions.WIDTH;this.canvasCtx.translate(t,this.y)}else this.canvasCtx.translate(this.x,this.y);this.canvasCtx.drawImage(this.image,h,o,e,n,a,r,c,d),this.canvasCtx.restore()}getActualDistance(t){return t?Math.round(t*this.config.COEFFICIENT):0}update(t,s){let i=!0;if(this.acheivement)this.flashIterations<=this.config.FLASH_ITERATIONS?(this.flashTimer+=t,this.flashTimer<this.config.FLASH_DURATION?i=!1:this.flashTimer>2*this.config.FLASH_DURATION&&(this.flashTimer=0,this.flashIterations+=1)):(this.acheivement=!1,this.flashIterations=0,this.flashTimer=0);else if((s=this.getActualDistance(s))>this.maxScore&&this.maxScoreUnits===this.config.MAX_DISTANCE_UNITS?(this.maxScoreUnits+=1,this.maxScore=parseInt(`${this.maxScore}9`,1)):this.distance=0,s>0){s%this.config.ACHIEVEMENT_DISTANCE===0&&(this.acheivement=!0,this.flashTimer=0);const t=(this.defaultString+s).substr(-this.maxScoreUnits);this.digits=t.split("")}else this.digits=this.defaultString.split("");if(i)for(let t=this.digits.length-1;t>=0;t-=1)this.draw(t,parseInt(this.digits[t],0));this.drawHighScore()}drawHighScore(){this.canvasCtx.save(),this.canvasCtx.globalAlpha=.8;for(let t=this.highScore.length-1;t>=0;t-=1)this.draw(t,parseInt(this.highScore[t],10),!0);this.canvasCtx.restore()}setHighScore(t){t=this.getActualDistance(t);const s=(this.defaultString+t).substr(-this.maxScoreUnits);this.highScore=["10","11",""].concat(s.split(""))}reset(){this.update(0),this.acheivement=!1}}class y{static config={HEIGHT:14,MAX_CLOUD_GAP:400,MAX_SKY_LEVEL:30,MIN_CLOUD_GAP:100,MIN_SKY_LEVEL:71,WIDTH:46};constructor(t,s,i){this.canvas=t,this.canvasCtx=this.canvas.getContext("2d"),this.spritePos=s,this.containerWidth=i,this.xPos=i,this.yPos=0,this.remove=!1,this.cloudGap=C(y.config.MIN_CLOUD_GAP,y.config.MAX_CLOUD_GAP),this.init()}init(){this.yPos=C(y.config.MAX_SKY_LEVEL,y.config.MIN_SKY_LEVEL),this.draw()}draw(){this.canvasCtx.save();const t=y.config.WIDTH,s=y.config.HEIGHT;this.canvasCtx.drawImage(E(),this.spritePos.x,this.spritePos.y,t,s,this.xPos,this.yPos,y.config.WIDTH,y.config.HEIGHT),this.canvasCtx.restore()}update(t){this.remove||(this.xPos-=Math.ceil(t),this.draw(),this.isVisible()||(this.remove=!0))}isVisible(){return this.xPos+y.config.WIDTH>0}}class S{static dimensions={WIDTH:600,HEIGHT:12,YPOS:127};constructor(t,s){this.spritePos=s,this.canvas=t,this.canvasCtx=t.getContext("2d"),this.sourceDimensions={},this.dimensions=S.dimensions,this.sourceXPos=[this.spritePos.x,this.spritePos.x+this.dimensions.WIDTH],this.xPos=[],this.yPos=0,this.bumpThreshold=.5,this.setSourceDimensions(),this.draw()}setSourceDimensions(){for(const t in S.dimensions)this.sourceDimensions[t]=S.dimensions[t],this.dimensions[t]=S.dimensions[t];this.xPos=[0,S.dimensions.WIDTH],this.yPos=S.dimensions.YPOS}getRandomType(){return Math.random()>this.bumpThreshold?this.dimensions.WIDTH:0}draw(){this.canvasCtx.drawImage(E(),this.sourceXPos[0],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[0],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT),this.canvasCtx.drawImage(E(),this.sourceXPos[1],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[1],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT)}updateXPos(t,s){const i=t,e=0===t?1:0;this.xPos[i]-=s,this.xPos[e]=this.xPos[i]+this.dimensions.WIDTH,this.xPos[i]<=-this.dimensions.WIDTH&&(this.xPos[i]+=2*this.dimensions.WIDTH,this.xPos[e]=this.xPos[i]-this.dimensions.WIDTH,this.sourceXPos[i]=this.getRandomType()+this.spritePos.x)}update(t,s){const i=Math.floor(.06*s*t);this.xPos[0]<=0?this.updateXPos(0,i):this.updateXPos(1,i),this.draw()}reset(){this.xPos[0]=0,this.xPos[1]=S.dimensions.WIDTH}}class P{constructor(t,s,i,e){this.x=t,this.y=s,this.width=i,this.height=e}}class D{static MAX_GAP_COEFFICIENT=1.5;static MAX_OBSTACLE_LENGTH=3;static types=[{type:"CACTUS_SMALL",width:17,height:35,yPos:105,multipleSpeed:4,minGap:120,minSpeed:0,collisionBoxes:[new P(0,7,5,27),new P(4,0,6,34),new P(10,4,7,14)]},{type:"CACTUS_LARGE",width:25,height:50,yPos:90,multipleSpeed:7,minGap:120,minSpeed:0,collisionBoxes:[new P(0,12,7,38),new P(8,0,7,49),new P(13,10,10,38)]},{type:"PTERODACTYL",width:46,height:40,yPos:[100,75,50],yPosMobile:[100,50],multipleSpeed:999,minSpeed:8.5,minGap:150,collisionBoxes:[new P(15,15,16,5),new P(18,21,24,6),new P(2,14,4,3),new P(6,10,4,7),new P(10,8,6,9)],numFrames:2,frameRate:1e3/6,speedOffset:.8}];constructor(t,s,i,e,n,h,o){this.canvasCtx=t,this.spritePos=i,this.typeConfig=s,this.gapCoefficient=n,this.size=C(1,D.MAX_OBSTACLE_LENGTH),this.dimensions=e,this.remove=!1,this.xPos=e.WIDTH+(o||0),this.yPos=0,this.width=0,this.collisionBoxes=[],this.gap=0,this.speedOffset=0,this.currentFrame=0,this.timer=0,this.init(h)}init(t){if(this.cloneCollisionBoxes(),this.size>1&&this.typeConfig.multipleSpeed>t&&(this.size=1),this.width=this.typeConfig.width*this.size,Array.isArray(this.typeConfig.yPos)){const t=this.typeConfig.yPos;this.yPos=t[C(0,t.length-1)]}else this.yPos=this.typeConfig.yPos;this.draw(),this.size>1&&(this.collisionBoxes[1].width=this.width-this.collisionBoxes[0].width-this.collisionBoxes[2].width,this.collisionBoxes[2].x=this.width-this.collisionBoxes[2].width),this.typeConfig.speedOffset&&(this.speedOffset=Math.random()>.5?this.typeConfig.speedOffset:-this.typeConfig.speedOffset),this.gap=this.getGap(this.gapCoefficient,t)}draw(){const t=this.typeConfig.width,s=this.typeConfig.height;let i=t*this.size*(.5*(this.size-1))+this.spritePos.x;this.currentFrame>0&&(i+=t*this.currentFrame),this.canvasCtx.drawImage(E(),i,this.spritePos.y,t*this.size,s,this.xPos,this.yPos,this.typeConfig.width*this.size,this.typeConfig.height)}update(t,s){this.remove||(this.typeConfig.speedOffset&&(s+=this.speedOffset),this.xPos-=Math.floor(60*s/1e3*t),this.typeConfig.numFrames&&(this.timer+=t,this.timer>=this.typeConfig.frameRate&&(this.currentFrame=this.currentFrame===this.typeConfig.numFrames-1?0:this.currentFrame+1,this.timer=0)),this.draw(),this.isVisible()||(this.remove=!0))}getGap(t,s){const i=Math.round(this.width*s+this.typeConfig.minGap*t);return C(i,Math.round(i*D.MAX_GAP_COEFFICIENT))}isVisible(){return this.xPos+this.width>0}cloneCollisionBoxes(){const{collisionBoxes:t}=this.typeConfig;for(let s=t.length-1;s>=0;s-=1)this.collisionBoxes[s]=new P(t[s].x,t[s].y,t[s].width,t[s].height)}}class A{static config={BG_CLOUD_SPEED:.2,BUMPY_THRESHOLD:.3,CLOUD_FREQUENCY:.5,HORIZON_HEIGHT:16,MAX_CLOUDS:6};constructor(t,s,i,e){this.canvas=t,this.canvasCtx=this.canvas.getContext("2d"),this.config=A.config,this.dimensions=i,this.gapCoefficient=e,this.obstacles=[],this.obstacleHistory=[],this.horizonOffsets=[0,0],this.cloudFrequency=this.config.CLOUD_FREQUENCY,this.spritePos=s,this.clouds=[],this.cloudSpeed=this.config.BG_CLOUD_SPEED,this.horizonLine=null,this.init()}init(){this.addCloud(),this.horizonLine=new S(this.canvas,this.spritePos.HORIZON)}update(t,s,i){this.runningTime+=t,this.horizonLine.update(t,s),this.updateClouds(t,s),i&&this.updateObstacles(t,s)}updateClouds(t,s){const i=this.cloudSpeed/1e3*t*s,e=this.clouds.length;if(e){for(let t=e-1;t>=0;t-=1)this.clouds[t].update(i);const t=this.clouds[e-1];e<this.config.MAX_CLOUDS&&this.dimensions.WIDTH-t.xPos>t.cloudGap&&this.cloudFrequency>Math.random()&&this.addCloud(),this.clouds=this.clouds.filter((t=>!t.remove))}else this.addCloud()}updateObstacles(t,s){const i=this.obstacles.slice(0);for(let e=0;e<this.obstacles.length;e+=1){const n=this.obstacles[e];n.update(t,s),n.remove&&i.shift()}if(this.obstacles=i,this.obstacles.length>0){const t=this.obstacles[this.obstacles.length-1];t&&!t.followingObstacleCreated&&t.isVisible()&&t.xPos+t.width+t.gap<this.dimensions.WIDTH&&(this.addNewObstacle(s),t.followingObstacleCreated=!0)}else this.addNewObstacle(s)}removeFirstObstacle(){this.obstacles.shift()}addNewObstacle(t){const s=C(0,D.types.length-1),i=D.types[s];if(this.duplicateObstacleCheck(i.type)||t<i.minSpeed)this.addNewObstacle(t);else{const s=this.spritePos[i.type];this.obstacles.push(new D(this.canvasCtx,i,s,this.dimensions,this.gapCoefficient,t,i.width)),this.obstacleHistory.unshift(i.type),this.obstacleHistory.length>1&&this.obstacleHistory.splice(2)}}duplicateObstacleCheck(t){let s=0;for(let i=0;i<this.obstacleHistory.length;i+=1)s=this.obstacleHistory[i]===t?s+1:0;return s>=2}reset(){this.obstacles=[],this.horizonLine.reset()}resize(t,s){this.canvas.width=t,this.canvas.height=s}addCloud(){this.clouds.push(new y(this.canvas,this.spritePos.CLOUD,this.dimensions.WIDTH))}}class w{static config={DROP_VELOCITY:-5,GRAVITY:.6,HEIGHT:47,HEIGHT_DUCK:25,INIITAL_JUMP_VELOCITY:-10,MAX_JUMP_HEIGHT:30,MIN_JUMP_HEIGHT:30,SPEED_DROP_COEFFICIENT:3,SPRITE_WIDTH:262,START_X_POS:50,WIDTH:44,WIDTH_DUCK:59};static collisionBoxes={DUCKING:[new P(1,18,55,25)],RUNNING:[new P(22,0,17,16),new P(1,18,30,9),new P(10,35,14,8),new P(1,24,29,5),new P(5,30,21,4),new P(9,34,15,4)]};static status={CRASHED:"CRASHED",DUCKING:"DUCKING",JUMPING:"JUMPING",RUNNING:"RUNNING",WAITING:"WAITING"};static BLINK_TIMING=7e3;static animFrames={WAITING:{frames:[44,0],msPerFrame:1e3/3},RUNNING:{frames:[88,132],msPerFrame:1e3/12},CRASHED:{frames:[220],msPerFrame:1e3/60},JUMPING:{frames:[0],msPerFrame:1e3/60},DUCKING:{frames:[262,321],msPerFrame:125}};constructor(t,s){this.canvas=t,this.canvasCtx=t.getContext("2d"),this.spritePos=s,this.xPos=0,this.yPos=0,this.groundYPos=0,this.currentFrame=0,this.currentAnimFrames=[],this.blinkDelay=0,this.blinkCount=0,this.animStartTime=0,this.timer=0,this.msPerFrame=1e3/60,this.config=w.config,this.status=w.status.WAITING,this.jumping=!1,this.ducking=!1,this.jumpVelocity=0,this.reachedMinHeight=!1,this.speedDrop=!1,this.jumpCount=0,this.jumpspotX=0,this.init()}init(){this.groundYPos=150-this.config.HEIGHT-10,this.yPos=this.groundYPos,this.minJumpHeight=this.groundYPos-this.config.MIN_JUMP_HEIGHT,this.draw(0,0),this.update(0,w.status.WAITING)}setJumpVelocity(t){this.config.INIITAL_JUMP_VELOCITY=-t,this.config.DROP_VELOCITY=-t/2}update(t,s){this.timer+=t,s&&(this.status=s,this.currentFrame=0,this.msPerFrame=w.animFrames[s].msPerFrame,this.currentAnimFrames=w.animFrames[s].frames,s===w.status.WAITING&&(this.animStartTime=x(),this.setBlinkDelay())),this.status===w.status.WAITING?this.blink(x()):this.draw(this.currentAnimFrames[this.currentFrame],0),this.timer>=this.msPerFrame&&(this.currentFrame=this.currentFrame===this.currentAnimFrames.length-1?0:this.currentFrame+1,this.timer=0),this.speedDrop&&this.yPos===this.groundYPos&&(this.speedDrop=!1,this.setDuck(!0))}draw(t,s){let i=t,e=s;const n=this.ducking&&this.status!==w.status.CRASHED?this.config.WIDTH_DUCK:this.config.WIDTH,h=this.config.HEIGHT;i+=this.spritePos.x,e+=this.spritePos.y,this.ducking&&this.status!==w.status.CRASHED?this.canvasCtx.drawImage(E(),i,e,n,h,this.xPos,this.yPos,this.config.WIDTH_DUCK,this.config.HEIGHT):(this.ducking&&this.status===w.status.CRASHED&&(this.xPos+=1),this.canvasCtx.drawImage(E(),i,e,n,h,this.xPos,this.yPos,this.config.WIDTH,this.config.HEIGHT))}setBlinkDelay(){this.blinkDelay=Math.ceil(Math.random()*w.BLINK_TIMING)}blink(t){t-this.animStartTime>=this.blinkDelay&&(this.draw(this.currentAnimFrames[this.currentFrame],0),1===this.currentFrame&&(this.setBlinkDelay(),this.animStartTime=t,this.blinkCount+=1))}startJump(t){void 0===t&&(t=O.instance_.currentSpeed),this.jumping||(this.update(0,w.status.JUMPING),this.jumpVelocity=this.config.INIITAL_JUMP_VELOCITY-t/10,this.jumping=!0,this.reachedMinHeight=!1,this.speedDrop=!1)}endJump(){this.reachedMinHeight&&this.jumpVelocity<this.config.DROP_VELOCITY&&(this.jumpVelocity=this.config.DROP_VELOCITY)}updateJump(t,s){const{msPerFrame:i}=w.animFrames[this.status],e=t/i;this.speedDrop?this.yPos+=Math.round(this.jumpVelocity*this.config.SPEED_DROP_COEFFICIENT*e):this.yPos+=Math.round(this.jumpVelocity*e),this.jumpVelocity+=this.config.GRAVITY*e,(this.yPos<this.minJumpHeight||this.speedDrop)&&(this.reachedMinHeight=!0),(this.yPos<this.config.MAX_JUMP_HEIGHT||this.speedDrop)&&this.endJump(),this.yPos>this.groundYPos&&(this.reset(),this.jumpCount+=1),this.update(t)}setSpeedDrop(){this.speedDrop=!0,this.jumpVelocity=1}setDuck(t){t&&this.status!==w.status.DUCKING?(this.update(0,w.status.DUCKING),this.ducking=!0):this.status===w.status.DUCKING&&(this.update(0,w.status.RUNNING),this.ducking=!1)}reset(){this.yPos=this.groundYPos,this.jumpVelocity=0,this.jumping=!1,this.ducking=!1,this.update(0,w.status.RUNNING),this.midair=!1,this.speedDrop=!1,this.jumpCount=0,this.crashed=!1}}function R(t,s){return new P(t.x+s.x,t.y+s.y,t.width,t.height)}function v(t,s){let i=!1;t.x,t.y;const e=s.x;return s.y,t.x<e+s.width&&t.x+t.width>e&&t.y<s.y+s.height&&t.height+t.y>s.y&&(i=!0),i}class H{onReset=N;onRunning=N;onCrash=N;constructor(t,s,i){this.tRexes=[];for(let e=0;e<t;e+=1){const t=new w(s,i);t.id=e,this.tRexes.push(t)}}update(t,s){this.tRexes.forEach((i=>{i.crashed||i.update(t,s)}))}draw(t,s){this.tRexes.forEach((i=>{i.crashed||i.draw(t,s)}))}updateJump(t,s){this.tRexes.forEach((i=>{i.jumping&&i.updateJump(t,s)}))}reset(){this.tRexes.forEach((t=>{t.reset(),this.onReset({tRex:t})}))}lives(){return this.tRexes.reduce(((t,s)=>s.crashed?t:t+1),0)}checkForCollision(t){let s=0;const i={obstacleX:t.xPos,obstacleY:t.yPos,obstacleWidth:t.width,speed:O.instance_.currentSpeed};return this.tRexes.forEach((async e=>{if(e.crashed)s+=1;else{const n=function(t,s){t.xPos;const i=new P(s.xPos+1,s.yPos+1,s.config.WIDTH-2,s.config.HEIGHT-2),e=new P(t.xPos+1,t.yPos+1,t.typeConfig.width*t.size-2,t.typeConfig.height-2);if(v(i,e)){const{collisionBoxes:n}=t,h=s.ducking?w.collisionBoxes.DUCKING:w.collisionBoxes.RUNNING;for(let t=0;t<h.length;t+=1)for(let s=0;s<n.length;s+=1){const o=R(h[t],i),a=R(n[s],e);if(v(o,a))return[o,a]}}return!1}(t,e);if(n)s+=1,e.crashed=!0,this.onCrash({tRex:e,state:i});else{const t=await this.onRunning({tRex:e,state:i});1===t?e.startJump():-1===t&&(e.jumping?e.setSpeedDrop():e.jumping||e.ducking||e.setDuck(!0))}}})),s===this.tRexes.length}}function N(){}class O{static generation=0;static config={ACCELERATION:.001,BG_CLOUD_SPEED:.2,CLEAR_TIME:0,CLOUD_FREQUENCY:.5,GAP_COEFFICIENT:.6,GRAVITY:.6,INITIAL_JUMP_VELOCITY:12,MAX_CLOUDS:6,MAX_OBSTACLE_LENGTH:3,MAX_SPEED:13,MIN_JUMP_HEIGHT:35,SPEED:6,SPEED_DROP_COEFFICIENT:3,T_REX_COUNT:1,onReset:b,onRunning:b,onCrash:b};static classes={CANVAS:"game-canvas",CONTAINER:"game-container"};static spriteDefinition={CACTUS_LARGE:{x:332,y:2},CACTUS_SMALL:{x:228,y:2},CLOUD:{x:86,y:2},HORIZON:{x:2,y:54},PTERODACTYL:{x:134,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:655,y:2},TREX:{x:848,y:2}};static keycodes={JUMP:{38:1,32:1},DUCK:{40:1}};static events={ANIM_END:"webkitAnimationEnd",CLICK:"click",KEYDOWN:"keydown",KEYUP:"keyup",RESIZE:"resize",VISIBILITY:"visibilitychange",BLUR:"blur",FOCUS:"focus",LOAD:"load"};constructor(t,s){if(O.instance_)return O.instance_;O.instance_=this,this.isFirstTime=!1,this.outerContainerEl=document.querySelector(t),this.generationEl=document.querySelector(".generation"),this.containerEl=null,this.config=Object.assign({},O.config,s),this.dimensions={WIDTH:600,HEIGHT:150},this.canvas=null,this.canvasCtx=null,this.tRex=null,this.distanceMeter=null,this.distanceRan=0,this.highestScore=0,this.time=0,this.runningTime=0,this.msPerFrame=1e3/60,this.currentSpeed=this.config.SPEED,this.obstacles=[],this.activated=!1,this.playing=!1,this.crashed=!1,this.resizeTimerId_=null,this.playCount=0,this.images={},this.imagesLoaded=0}async init(){await new Promise((t=>{const s=document.createElement("img");s.src=i(8795),s.addEventListener("load",(()=>{I=s,t()}))})),this.spriteDef=O.spriteDefinition,this.adjustDimensions(),this.setSpeed(),this.containerEl=document.createElement("div"),this.containerEl.className=O.classes.CONTAINER,this.containerEl.style.width=`${this.dimensions.WIDTH}px`,this.canvas=function(t,s,i,e){const n=document.createElement("canvas");return n.className=e?`${O.classes.CANVAS} ${e}`:O.classes.CANVAS,n.width=s,n.height=i,t.appendChild(n),n}(this.containerEl,this.dimensions.WIDTH,this.dimensions.HEIGHT,O.classes.PLAYER),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.fillStyle="#f7f7f7",this.canvasCtx.fill(),O.updateCanvasScaling(this.canvas),this.horizon=new A(this.canvas,this.spriteDef,this.dimensions,this.config.GAP_COEFFICIENT),this.distanceMeter=new T(this.canvas,this.spriteDef.TEXT_SPRITE,this.dimensions.WIDTH),this.tRexGroup=new H(this.config.T_REX_COUNT,this.canvas,this.spriteDef.TREX),this.tRexGroup.onRunning=this.config.onRunning,this.tRexGroup.onCrash=this.config.onCrash,this.tRex=this.tRexGroup.tRexes[0],this.outerContainerEl.appendChild(this.containerEl),this.startListening(),this.update(),window.addEventListener(O.events.RESIZE,this.debounceResize.bind(this)),this.restart()}debounceResize(){this.resizeTimerId_||(this.resizeTimerId_=setInterval(this.adjustDimensions.bind(this),250))}adjustDimensions(){clearInterval(this.resizeTimerId_),this.resizeTimerId_=null;const t=window.getComputedStyle(this.outerContainerEl),s=Number(t.paddingLeft.substr(0,t.paddingLeft.length-2));this.dimensions.WIDTH=this.outerContainerEl.offsetWidth-2*s,this.canvas&&(this.canvas.width=this.dimensions.WIDTH,this.canvas.height=this.dimensions.HEIGHT,O.updateCanvasScaling(this.canvas),this.distanceMeter.calcXPos(this.dimensions.WIDTH),this.clearCanvas(),this.horizon.update(0,0,!0),this.tRexGroup.update(0),this.playing||this.crashed?(this.containerEl.style.width=`${this.dimensions.WIDTH}px`,this.containerEl.style.height=`${this.dimensions.HEIGHT}px`,this.distanceMeter.update(0,Math.ceil(this.distanceRan)),this.stop()):this.tRexGroup.draw(0,0))}setSpeed(t){this.currentSpeed=t||this.currentSpeed}startGame(){this.runningTime=0,this.containerEl.style.webkitAnimation="",this.playCount+=1}clearCanvas(){this.canvasCtx.clearRect(0,0,this.dimensions.WIDTH,this.dimensions.HEIGHT)}update(){this.updatePending=!1;const t=x();let s=t-(this.time||t);if(this.time=t,this.playing){this.clearCanvas(),this.tRexGroup.updateJump(s),this.runningTime+=s;const t=this.runningTime>this.config.CLEAR_TIME;this.isFirstTime&&(this.activated||this.crashed||(this.playing=!0,this.activated=!0,this.startGame())),s=this.activated?s:0,this.horizon.update(s,this.currentSpeed,t);let i=!1;t&&(i=this.tRexGroup.checkForCollision(this.horizon.obstacles[0])),i?this.gameOver():(this.distanceRan+=this.currentSpeed*s/this.msPerFrame,this.currentSpeed<this.config.MAX_SPEED&&(this.currentSpeed+=this.config.ACCELERATION)),this.distanceMeter.update(s,Math.ceil(this.distanceRan))}!this.playing&&this.activated||(this.tRexGroup.update(s),this.scheduleNextUpdate()),this.tRexGroup.lives()>0?this.generationEl.innerText=`GENERATION #${O.generation} | LIVE x ${this.tRexGroup.lives()}`:this.generationEl.innerHTML=`<div style="color: red;">GENERATION #${O.generation}  |  GAME OVER</div>`}startListening(){document.addEventListener(O.events.KEYDOWN,(t=>{this.onKeyDown(t)})),document.addEventListener(O.events.KEYUP,(t=>{this.onKeyUp(t)}))}onKeyDown(t){!this.crashed&&this.playing?O.keycodes.JUMP[t.keyCode]?(t.preventDefault(),this.tRex.startJump(this.currentSpeed)):O.keycodes.DUCK[t.keyCode]&&(t.preventDefault(),this.tRex.jumping?this.tRex.setSpeedDrop():this.tRex.jumping||this.tRex.ducking||this.tRex.setDuck(!0)):this.crashed&&this.restart()}onKeyUp(t){const s=String(t.keyCode),i=O.keycodes.JUMP[s];this.isRunning()&&i?this.tRex.endJump():O.keycodes.DUCK[s]?(this.tRex.speedDrop=!1,this.tRex.setDuck(!1)):this.crashed&&O.keycodes.JUMP[s]&&this.restart()}scheduleNextUpdate(){this.updatePending||(this.updatePending=!0,this.raqId=requestAnimationFrame(this.update.bind(this)))}isRunning(){return!!this.raqId}gameOver(){this.stop(),this.crashed=!0,this.distanceMeter.acheivement=!1,this.tRexGroup.update(100,w.status.CRASHED),this.distanceRan>this.highestScore&&(this.highestScore=Math.ceil(this.distanceRan),this.distanceMeter.setHighScore(this.highestScore)),this.time=x(),setTimeout((()=>{this.restart()}),500)}stop(){this.playing=!1,cancelAnimationFrame(this.raqId),this.raqId=0}play(){this.crashed||(this.playing=!0,this.tRexGroup.update(0,w.status.RUNNING),this.time=x(),this.update())}restart(){this.raqId?(this.isFirstTime=!0,this.tRexGroup.reset(),this.config.onReset({tRexes:this.tRexGroup.tRexes}),this.playing||(this.playing=!0,this.update())):(this.playCount+=1,this.runningTime=0,this.playing=!0,this.crashed=!1,this.distanceRan=0,this.setSpeed(this.config.SPEED),this.time=x(),this.clearCanvas(),this.distanceMeter.reset(this.highestScore),this.horizon.reset(),this.tRexGroup.reset(),this.config.onReset({tRexes:this.tRexGroup.tRexes}),this.update()),O.generation+=1}static updateCanvasScaling(t,s,i){const e=t.getContext("2d"),n=Math.floor(window.devicePixelRatio)||1,h=Math.floor(e.webkitBackingStorePixelRatio)||1,o=n/h;if(n!==h){const n=s||t.width,h=i||t.height;return t.width=n*o,t.height=h*o,t.style.width=`${n}px`,t.style.height=`${h}px`,e.scale(o,o),!0}return 1===n&&(t.style.width=`${t.width}px`,t.style.height=`${t.height}px`),!1}}function b(){}var G=i(4158);function M(t){if(t instanceof G.qYS)return t;if("number"==typeof t)return G.d_2(t);if(Array.isArray(t))return G.OEK(t);throw new Error("tensor() only supports number or array as the input parameter.")}class L{init(){throw new Error("Abstract method must be implemented in the derived class.")}predict(t){throw new Error("Abstract method must be implemented in the derived class.")}predictSingle(t){return this.predict([t])}train(t,s){throw new Error("Abstract method must be implemented in the derived class.")}fit(t,s,i=100){for(let e=0;e<i;e+=1)this.train(t,s)}loss(t,s){return t.sub(M(s)).square().mean()}}class U extends L{weights=[];biases=[];constructor({inputSize:t=3,hiddenLayerSize:s=2*t,outputSize:i=2,learningRate:e=.1}={}){super(),this.hiddenLayerSize=s,this.inputSize=t,this.outputSize=i,this.optimizer=G.BaG.adam(e)}init(){this.weights[0]=G.bvq(G.FE$([this.inputSize,this.hiddenLayerSize])),this.biases[0]=G.bvq(G.d_2(Math.random())),this.weights[1]=G.bvq(G.FE$([this.hiddenLayerSize,this.outputSize])),this.biases[1]=G.bvq(G.d_2(Math.random()))}predict(t){const s=M(t);return G.DZQ((()=>{const t=G.ry7(s.matMul(this.weights[0]).add(this.biases[0]));return G.ry7(t.matMul(this.weights[1]).add(this.biases[1]))}))}train(t,s){this.optimizer.minimize((()=>{const i=this.predict(t);return this.loss(i,s)}))}}let _=null,F=!0;function z({tRexes:t}){const s=t[0];F?(F=!1,s.model=new U,s.model.init(),s.training={inputs:[],labels:[]}):(console.info("Training"),s.model.fit(s.training.inputs,s.training.labels))}function W({tRex:t,state:s}){return new Promise((i=>{if(t.jumping)i(0);else{let e=0;t.model.predictSingle(k(s)).data().then((n=>{n[1]>n[0]?(e=1,t.lastJumpingState=s):t.lastRunningState=s,i(e)}))}}))}function X({tRex:t}){let s=null,i=null;t.jumping?(s=k(t.lastJumpingState),i=[1,0]):(s=k(t.lastRunningState),i=[0,1]),t.training.inputs.push(s),t.training.labels.push(i)}function k(t){return t?[t.obstacleX/600,t.obstacleWidth/600,t.speed/100]:[0,0,0]}document.addEventListener("DOMContentLoaded",(function(){_=new O(".game",{T_REX_COUNT:1,onReset:z,onCrash:X,onRunning:W}),window.runner=_,_.init()}))},5696:()=>{},6901:()=>{},8661:()=>{},8795:(t,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>e});const e="data:image/png;base64,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"}},i={};function e(t){var n=i[t];if(void 0!==n)return n.exports;var h=i[t]={id:t,loaded:!1,exports:{}};return s[t].call(h.exports,h,h.exports,e),h.loaded=!0,h.exports}e.m=s,e.amdD=function(){throw new Error("define cannot be used indirect")},e.amdO={},t=[],e.O=(s,i,n,h)=>{if(!i){var o=1/0;for(d=0;d<t.length;d++){for(var[i,n,h]=t[d],a=!0,r=0;r<i.length;r++)(!1&h||o>=h)&&Object.keys(e.O).every((t=>e.O[t](i[r])))?i.splice(r--,1):(a=!1,h<o&&(o=h));if(a){t.splice(d--,1);var c=n();void 0!==c&&(s=c)}}return s}h=h||0;for(var d=t.length;d>0&&t[d-1][2]>h;d--)t[d]=t[d-1];t[d]=[i,n,h]},e.n=t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},e.d=(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={335:0};e.O.j=s=>0===t[s];var s=(s,i)=>{var n,h,[o,a,r]=i,c=0;if(o.some((s=>0!==t[s]))){for(n in a)e.o(a,n)&&(e.m[n]=a[n]);if(r)var d=r(e)}for(s&&s(i);c<o.length;c++)h=o[c],e.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return e.O(d)},i=self.webpackChunk=self.webpackChunk||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))})(),e.nc=void 0;var n=e.O(void 0,[121],(()=>e(2883)));n=e.O(n)})();